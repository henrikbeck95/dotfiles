#=====================================================================================
#                                  Dotfile manager
# Date creation : 14/10/2020
# Date current  : 06/09/2021
# Version       : v0.1.2
# Author        : Henrik Beck at https://www.github.com/henrikbeck95/
# Project       : https://www.github.com/henrikbeck95/dotfiles/
#======================================================================================

#############################################################################
#READ THIS QUICK TUTORIAL FOR NOT BREAKING THE OPERATION SYSTEM DOWN AND CRY
#############################################################################

# WARNING!
#DO NOT EDIT THIS CONFIGURATION FILE FROM HERE. THERE IS A SHELL SCRIPT FILE CALLED "generate.sh" THAT WAS MADE TO PROVIDE MORE COMFORTABLE AND ORGANIZABLE FOR MANAGEMENTING THE DOTFILES.

#THE SETTINGS FILES ARE SPLITED INTO MODULES WHAT MINIMIZES THE RISK TO BREAK THE SOFTWARES SETTINGS DOWN. FURTHERMORE IT ALSO PREVENTS THE SAME OLD SYNTAX THAT WE ARE USED TO USE IN ALL THESE CONFIGURATION FILES.

#FOR MORE INFORMATIONS ABOUT HOW IT WORKS TAKE A LOOK AT THE **DOTFILES** OFFICIAL REPOSITORY.

#██████╗ ██╗ ██████╗ ██████╗ ███╗   ███╗
#██╔══██╗██║██╔════╝██╔═══██╗████╗ ████║
#██████╔╝██║██║     ██║   ██║██╔████╔██║
#██╔═══╝ ██║██║     ██║   ██║██║╚██╔╝██║
#██║     ██║╚██████╗╚██████╔╝██║ ╚═╝ ██║
#╚═╝     ╚═╝ ╚═════╝ ╚═════╝ ╚═╝     ╚═╝

#############################
#Configuration files
#############################

#Compton could read from a configuration file if libconfig support is compiled in. If --config is not used, compton will seek for a configuration file in $XDG_CONFIG_HOME/compton.conf (~/.config/compton.conf, usually), then ~/.compton.conf, then compton.conf under $XDG_CONFIG_DIRS (often /etc/xdg/compton.conf).

#############################
#Fading
#############################

fading = false; #Fade windows during opacity changes.
fade-delta = 4; #The time between steps in a fade in milliseconds. (default 10).
fade-in-step = 0.03; #Opacity change between steps while fading in. (default 0.028).
fade-out-step = 0.03; #Opacity change between steps while fading out. (default 0.03).
#no-fading-openclose = true; #Fade windows in/out when opening/closing

# Specify a list of conditions of windows that should not be faded.
fade-exclude = [ ];

#############################
#Opacity
#############################

active-opacity = 0.925;
#active-opacity = 0.9;
#active-opacity = 1.0;

#inactive-opacity = 0.65;
#inactive-opacity = 0.925;
inactive-opacity = 0.8;

menu-opacity = 0.9;

#frame-opacity = 0.9;
frame-opacity = 1;

#inactive-opacity-override = true;
inactive-opacity-override = false;

#alpha-step = 0.06;

# Dim inactive windows. (0.0 - 1.0)
#inactive-dim = 0.0;
#inactive-dim = 0.01;
#inactive-dim = 0.1;
inactive-dim = 0.2;

inactive-dim-fixed = true; # Do not let dimness adjust based on window opacity.

##When window is activeted it gets transparence
opacity-rule = [
  "85:class_g = 'URxvt' && focused",
  "20:class_g = 'URxvt' && !focused",

  "80:class_g = 'Gnome-terminal' && focused",
  "50:class_g = 'Gnome-terminal' && !focused",

  "99:name *?= 'firefox' && focused",
  "95:name *?= 'firefox' && !focused",

  "99:name *?= 'picture-in-picture' && focused",
  "97:name *?= 'picture-in-picture' && !focused",

  "97:name *?= 'code' && focused",
  "88:name *?= 'code' && !focused",

  "20:name *?= 'i3lock'",

  "99:window_type = 'notification' && focused",
  "99:window_type = 'notification' && !focused",

  "85:class_g = 'Rofi'",
  "85:class_g = 'Polybar'"
];

#opacity-rule = [
#  "90:name *?= 'brave-browser'",
#  "50:name *?= 'st-256color'",
#	"80:class_g = 'UXTerm'",
#	"80:class_g = 'XTerm'",
#  "99:window_type = 'normal'", # Add a tiny bit of opacity to all normal windows to apply blur
#	"99:window_type = 'dialog'", # Add a tiny bit of opacity to all dialog windows to apply blur
#	"99:window_type = 'popup_menu'", # Add a tiny bit of opacity to all popup_menu windows to apply blur
#	"99:window_type = 'notification'"	# Add a tiny bit of opacity to all popup_menu windows to apply blur
#];

#############################
#Blur
#############################

blur-background = true; #Blur background of transparent windows. Bad performance with X Render backend. GLX backend is preferred.
#blur-background-frame = true; #Blur background of opaque windows with transparent frames as well.
#blur-background-fixed = true; #Do not let blur radius adjust based on window opacity.
blur-background-fixed = false; #Do not let blur radius adjust based on window opacity.

#blur-kern = "3x3box";
blur-kern = "7x7box";
#blur-kern = "5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1";

strength = 8

#blur: {
#    method = "dual_kawase";
#    strength = 8;
#    background = false;
#    background-frame = false;
#    background-fixed = false;
#}

#blur: {
#    background = true;
#    #method = "kawase";
#    method = "dual_kawase";
#    strength = 8;
#    #background-frame = false;
#    #background-fixed = false;
#}

blur-background-exclude = [
    "class_g = 'st-256color'",
    "window_type = 'dock'",
    "window_type = 'desktop'",
    "window_type = 'utility'",
    "_GTK_FRAME_EXTENTS@:c"
];

#############################
#Backend
#############################

backend = "glx"; #GLX backend is typically much faster but depends on a sane driver. "xrender" or "glx".
#experimental-backends = true;
glx-no-stencil = true;
glx-copy-from-front = false; #Copy unmodified regions from front buffer instead of redrawing them all.
#glx-swap-method = "undefined"; #GLX buffer swap method we assume. TRY "buffer-age"
#glx-no-rebind-pixmap = true; #Avoid rebinding pixmap on window damage.

#############################
#Others
#############################

dbe = false; #Enable DBE painting mode, intended to use with VSync to (hopefully) eliminate tearing.
detect-client-leader = true; #Use WM_CLIENT_LEADER to group windows, and consider windows in the same group focused at the same time.
detect-client-opacity = true; #This prevents opacity being ignored for some apps.
detect-rounded-corners = true; #Detect rounded corners and treat them as rectangular when --shadow-ignore-shaped is on.
detect-transient = true; #Use WM_TRANSIENT_FOR to group windows, and consider windows in the same group focused at the same time.

focus-exclude = [ "class_g = 'Cairo-clock'" ]; #Specify a list of conditions of windows that should always be considered focused.
#invert-color-include = [ ];
#log-level = "warn";

mark-wmwin-focused = true; #Try to detect WM windows and mark them as active.
mark-ovredir-focused = true; #Mark all non-WM but override-redirect windows active (e.g. menus).

#paint-on-overlay = true; #Painting on X Composite overlay window. Recommended.
refresh-rate = 0; #Specify refresh rate of the screen.
# resize-damage = 1;

unredir-if-possible = false; #Unredirect all windows if a full-screen opaque window is detected, to maximize performance for full-screen windows, like games.
#use-damage = "true";

use-ewmh-active-win = true;

vsync = true; #Vertical synchronization: match the refresh rate of the monitor

xrender-sync-fence = true;

#############################
#Window type settings
#############################

wintypes:{
	tooltip:{
		fade = true; #Fade the particular type of windows.
		#focus = true; #Whether to always consider windows of this type focused.
		focus = false; #Whether to always consider windows of this type focused.
		opacity = 0.85; #Opacity: Default opacity for the type of windows.
		shadow = false; #Give those windows shadow
	};
	fullscreen:{
		fade = true;
		focus = true;
		opacity = 1;
		shadow = false;
	};
  
	##Testing
	
	normal:{
		shadow = false;
	};

	dock:{
		shadow = false;
	};

	dnd:{
		shadow = false;
	};

	#popup_menu{
	#	#shadow = true;
	#	shadow = false;
	#	#focus = false;
	#	focus = true;
	#	opacity = 0.90;
	#};

	#dropdown_menu{
	#	shadow = false;
	#	focus = false;
	#};

	#above{
	#	shadow = false;
	#};

	#splash{
	#	shadow = false;
	#};

	#utility{
	#	focus = false;
	#	shadow = false;
	#};

	#notification{
	#	shadow = false;
	#};

	#desktop{
	#	shadow = false;
	#};

	#menu{
	#	focus = false;
	#	#focus = true;
	#	shadow = false;
	#};

	#dialog{
	#	shadow = false;
	#};
};

#############################
#Shadow
#############################

shadow = true; #Enabled client-side shadows on windows.
shadow-radius = 7; #The blur radius for shadows. (default 12)
shadow-offset-x = -7; #The left offset for shadows. (default -15)
shadow-offset-y = -7; #The top offset for shadows. (default -15)
shadow-opacity = 0.7; #The translucency for shadows. (default .75)

##Color
### Set if you want different colour shadows
shadow-red = 0.0;
shadow-green = 0.0;
shadow-blue = 0.0;

#This list includes all the affected apps I found in my testing. The "! name~=''" part excludes shadows on any "Unknown" windows, this prevents a visual glitch with the XFWM alt tab switcher.
shadow-exclude = [
    "! name~=''",
    "name = 'Notification'",
    "name = 'Plank'",
    "name = 'Docky'",
    "name = 'Kupfer'",
    "name = 'xfce4-notifyd'",
    "name = 'cpt_frame_window'",
    "name *= 'VLC'",
    "name *= 'compton'",
    "name *= 'picom'",
    "name *= 'Chromium'",
    "name *= 'Chrome'",
    "name *= 'Firefox'",
    "class_g = 'Firefox' && argb",
    "class_g = 'Conky'",
    "class_g = 'Kupfer'",
    "class_g = 'Synapse'",
    "class_g ?= 'Notify-osd'",
    "class_g ?= 'Cairo-dock'",
    "class_g ?= 'Xfce4-notifyd'",
    "class_g ?= 'Xfce4-power-manager'",
    "_GTK_FRAME_EXTENTS@:c",
    "_NET_WM_STATE@:32a *= '_NET_WM_STATE_HIDDEN'"
];
shadow-ignore-shaped = false; # Avoid drawing shadow on all shaped windows (see also: --detect-rounded-corners)
#no-dnd-shadow = true; # Don't draw shadows on DND windows.
#clear-shadow = true; # Zero the part of the shadow's mask behind the window. Fix some weirdness with ARGB windows.
#xinerama-shadow-crop = false; # Prevent shadows from drawing across displays.

corner-radius = 15
rounded-corners-exclude = [
    "window_type = 'desktop'",
    "window_type = 'toolbar'",
    "window_type = 'menu'",
    "window_type = 'dropdown_menu'",
    #"window_type = 'popup_menu'",
    #"window_type = 'notification'",
    "window_type = 'dnd'",
    "window_type = 'dock'",
    #"class_g = 'Spotify'",
];

round-borders-exclude = [
    "class_g = 'mpv'",
    "class_g = 'Spotify'",
];

